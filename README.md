# PAKDD2021_code
PAKDD2021第二届阿里云智能运维算法大赛第23名代码

get_model.py文件中包含了特征构造和建模过程，本次比赛中采取的特征和建模方法如下：

1.特征工程：

（1）对于kernel数据集，将数据按照serial_number、manufacturer、vendor和collect_time分组求和，并统计2分钟内的日志数，之后对每个server的2min日志数统计均值、中位数和加和作为新特征，同时对kernel表中原有的24个特征进行筛选，删除了方差为0以及相关系数大于0.8且再建模过程中重要性极低的特征。
（2）对于address数据集，分别统计每个server的每2分钟内row和col的数量、重复出现（出现次数大于1）的数量以及最大重复次数作为特征。
（3）对于mce数据集，将transaction和mca_id两个分类变量变成多个哑变量，以2分钟为间隔计算各哑变量相应的数量，并在多次建模后删除个别重要性极低的变量。

2.建模

  本次使用catboost进行建模，将manufacturer和vendor作为两个分类变量处理（cat_features），最终共32个特征。用初赛1-5月数据作为训练集，初赛b榜7月份最后十天的数据作为验证集，模型分为分类和回归两部分：首先进行分类预测，将距离故障时间七天以内的日志的标签设为1，其他日志标签为0。由于正负样本量极不平衡，以正负样本1：10的比例在负样本中抽样，并与所有正样本合并作为训练样本，最终得到预测标签为1的所有测试集样本，即预测未来7天会故障的服务器。下一步用catboost回归来确定故障服务器距离故障的具体时间。训练集变为第一步样本中的所有正样，因变量为距离故障的时间（单位为分钟），最终得到预测的pti。
